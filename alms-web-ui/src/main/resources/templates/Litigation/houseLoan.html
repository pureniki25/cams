<!DOCTYPE html>
<!--suppress ALL -->
<html lang="zh-cn">
<!--<html lang="en" xmlns:th="http://www.thymeleaf.org">-->
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
    <title>房贷移交诉讼</title>
    <!-- 默认主题样式 -->
    <link rel="stylesheet" type="text/css" href="/src/css/themes/default.css"/>
    <!-- iview样式 -->
    <link rel="stylesheet" type="text/css" href="/plugins/iview/css/iview.css"/>
    <!--<link rel="stylesheet" type="//unpkg.com/iview/dist/styles/iview.css"/>-->
    <!-- 引入layui样式 -->
    <link rel="stylesheet" href="/plugins/layui/css/layui.css" media="all"/>

    <!-- 引入vue -->
    <script type="text/javascript" src="/plugins/vue/vue.min.js"></script>
    <!--iview js -->
    <script type="text/javascript" src="/plugins/iview/js/iview.js"></script>
    <!--    <script src="//unpkg.com/vue/dist/vue.js"></script>
        <script src="//unpkg.com/iview/dist/iview.min.js"></script>-->

    <!--引入layui.js-->
    <script src="/plugins/layui/layui.js"></script>
    <!--引入axios.js 用于ajax调用-->
    <script src="/plugins/axios/axios.min.js"></script>

    <!-- 流程组件的  -->
    <link rel="stylesheet" href="/Components/ProcessLine/ProcessLine.css">
    <script src="/Components/ProcessLine/ProcessLine.js"></script>

    <!--表格样式-->
    <link rel="stylesheet" href="/Components/Table/Table.css">

    <!-- 引入jQuery，必须在appToken.js 之前引入 -->
    <script src="/build/js/jquery-3.3.1.min.js"></script>
    <!-- 设置全局请求头:app、Authorization -->
    <script src="/build/js/appToken.js"></script>

    <!--引入公共的一些方法-->
    <script src="/src/js/comm.js"></script>



</head>
<body>
<!--隐藏元素-->
<p id="businessId"  th:attr="value=${businessId}"  hidden />
<p id="crpId"  th:attr="value=${crpId}"  hidden />
<p id="processStatus"  th:attr="value=${processStatus}"  hidden />
<p id="processId"  th:attr="value=${processId}"  hidden />
<!--使用v-cloak技术，在vue渲染完毕前隐藏页面，渲染完成后显示-->
<div id="app" v-cloak>

    <row type="flex" justify="end" class="code-row-bg">
        <i-col span="17"><font size="6px" color="#464c5b">房贷不良业务移交及起诉申请({{ baseInfoForm.companyName }})</font></i-col>
    </row>
    
    <br/>
    
    <Card>
        <p slot="title">
            审批流程
        </p>
        <div class="ProcessWarp">
            <ProcessLine :data='myProcess'></ProcessLine>
        </div>
    </Card>
    <br>
    <row>
	    
		<!--基本信息表单内容-->
		<i-form ref="commitInfoForm" :model="commitInfoForm" label-position="right" :label-width="100" :rules="validCommitInfoForm">
		<Card>
			<p>
				一、业务基本信息
			</p>
			<row :gutter="16">
		        <div class="table">
		            <div class="tr">
		                <div class="td"> <div class="td-box">业务编号</div><div class="td-box">{{ baseInfoForm.businessId }} </div> </div>
		                <div class="td"> <div class="td-box">客户名称</div><div class="td-box">{{ baseInfoForm.customerName }} </div> </div>
		                <div class="td"> <div class="td-box">联系电话</div><div class="td-box">{{ baseInfoForm.phoneNumber }} </div> </div>
		            </div>
		            <div class="tr">
		                <div class="td"> <div class="td-box">业务类型</div><div class="td-box">{{ baseInfoForm.businessTypeName }} </div> </div>
		                <div class="td"> <div class="td-box">借款金额</div><div class="td-box">{{ baseInfoForm.borrowMoney }} </div> </div>
		                <div class="td"> <div class="td-box">出款金额</div><div class="td-box">{{ baseInfoForm.factOutputMoney }} </div> </div>
		            </div>
		            <div class="tr">
		                <div class="td"> <div class="td-box">业务经办人</div><div class="td-box">{{ baseInfoForm.operatorName }} </div> </div>
		                <div class="td"> <div class="td-box">业务获取</div><div class="td-box">{{ baseInfoForm.originalName }} </div> </div>
		                <div class="td"> <div class="td-box">主审风控</div><div class="td-box">{{ baseInfoForm.lastReviewUserName }} </div> </div>
		            </div>
		            <div class="tr">
		                <div class="td"> <div class="td-box">费率（利息+服务费）</div><div class="td-box">{{ baseInfoForm.borrowRate }}</div> </div>
		                <div class="td"> <div class="td-box">借款期限</div><div class="td-box">{{ baseInfoForm.borrowLimit }} </div> </div>
		                <div class="td"> <div class="td-box">公证类型</div><div class="td-box">{{ baseInfoForm.notarizationType }} </div> </div>
		            </div>
		        </div>
			</row>
			
		</Card>
		
		<Card>
			<p>
				二、还款计划信息
			</p>
			<row :gutter="16">
                <i-table border :columns="repaymentPlanTitle" :data="repaymentPlanTitleData"></i-table>
			</row>
			<row :gutter="16">
				<i-col v-if="applyInfoFormEditFlage" span="22">
                    <form-item label="客户逾期情况描述：" prop="overdueDesc" >
                        <i-input v-model="commitInfoForm.overdueDesc" type="textarea" :rows="4" placeholder="申请人员填写，必填。限1000字"></i-input>
                    </form-item>
                </i-col>
                <i-col v-else span="22">
                    <form-item label="客户逾期情况描述：" prop="overdueDesc" disabled >
                        <i-input v-model="commitInfoForm.overdueDesc" type="textarea" :rows="4" placeholder="申请人员填写，必填。限1000字" disabled></i-input>
                    </form-item>
                </i-col>
            </row>
		</Card>
		
		<Card>
			<p>
				三、抵押物情况
			</p>
			<row :gutter="16">
				<i-col v-if="applyInfoFormEditFlage" span="22">
                    <form-item label="未能覆盖的风险口：" prop="riskDesc" >
                        <i-input v-model="commitInfoForm.riskDesc" type="textarea" :rows="4" placeholder="申请人员填写，必填，限500字"></i-input>
                    </form-item>
                </i-col>
                <i-col v-else span="22">
                    <form-item label="未能覆盖的风险口：" prop="riskDesc" disabled >
                        <i-input v-model="commitInfoForm.riskDesc" type="textarea" :rows="4" placeholder="申请人员填写，必填，限500字" disabled></i-input>
                    </form-item>
                </i-col>
                
				<i-col v-if="applyInfoFormEditFlage" span="22">
                    <form-item label="其他质押情况：" prop="otherPledgeDesc" >
                        <i-input v-model="commitInfoForm.otherPledgeDesc" type="textarea" :rows="4" placeholder="申请人员填写，必填，限500字"></i-input>
                    </form-item>
                </i-col>
                <i-col v-else span="22">
                    <form-item label="其他质押情况：" prop="otherPledgeDesc" disabled >
                        <i-input v-model="commitInfoForm.otherPledgeDesc" type="textarea" :rows="4" placeholder="申请人员填写，必填，限500字" disabled></i-input>
                    </form-item>
                </i-col>
           	</row>
		</Card>
		
		<Card>
			<p>
				四、合同信息
			</p>
			<row :gutter="16">
				<i-col span="5">
                    <form-item v-if="applyInfoFormEditFlage" label="转账收据张数："   prop="transferReceiptCount">
                        <i-input v-model="commitInfoForm.transferReceiptCount" ></i-input>
                    </form-item>
                    <form-item v-else label="转账收据张数："  disabled>
                        <i-input v-model="commitInfoForm.transferReceiptCount" disabled ></i-input>
                    </form-item>
                </i-col>
                
				<i-col span="5">
                    <form-item v-if="applyInfoFormEditFlage" label="现金收据张数："   prop="cashReceiptCount">
                        <i-input v-model="commitInfoForm.cashReceiptCount" ></i-input>
                    </form-item>
                    <form-item v-else label="现金收据张数："  disabled>
                        <i-input v-model="commitInfoForm.cashReceiptCount" disabled ></i-input>
                    </form-item>
                </i-col>
                
                <i-col span="5">
                    <form-item v-if="applyInfoFormEditFlage == true" label="还款收据第二联是否在客户手上：" prop="receiptStatus"  >
                        <radio-group v-model="commitInfoForm.receiptStatus" >
                            <radio label="是" ></radio>
                            <radio label="否" ></radio>
                        </radio-group>
                    </form-item>
                    <form-item v-else label="还款收据第二联是否在客户手上：" prop="receiptStatus" disabled  >
                        <radio-group v-model="commitInfoForm.receiptStatus" disabled>
                            <radio label="是" disabled></radio>
                            <radio label="否" disabled></radio>
                        </radio-group>
                    </form-item>
                </i-col>
           	</row>
           		
           	<row>
           		<i-col v-if="applyInfoFormEditFlage" span="22">
                    <form-item label="业务合同有无特殊情况：" prop="contractDesc" >
                        <i-input v-model="commitInfoForm.contractDesc" type="textarea" :rows="4" placeholder="申请人员填写，必填，限500字"></i-input>
                    </form-item>
                </i-col>
                <i-col v-else span="22">
                    <form-item label="业务合同有无特殊情况：" prop="contractDesc" disabled >
                        <i-input v-model="commitInfoForm.contractDesc" type="textarea" :rows="4" placeholder="申请人员填写，必填，限500字" disabled></i-input>
                    </form-item>
                </i-col>
           	</row>
		</Card>
		
		<Card>
			<p>
				五、业务经办调查结果
			</p>
			<row :gutter="16">
				<i-col span="10">
                    <form-item v-if="applyInfoFormEditFlage" label="客户是否有意向还款："   prop="repaymentIntention">
                        <i-input v-model="commitInfoForm.repaymentIntention" ></i-input>
                    </form-item>
                    <form-item v-else label="客户是否有意向还款："  disabled>
                        <i-input v-model="commitInfoForm.repaymentIntention" disabled ></i-input>
                    </form-item>
                </i-col>
                
				<i-col span="10">
                    <form-item v-if="applyInfoFormEditFlage" label="意向还款计划："   prop="repaymentIntentionDate">
                        <i-input v-model="commitInfoForm.repaymentIntentionDate" type="date"></i-input>
                    </form-item>
                    <form-item v-else label="意向还款计划："  disabled>
                        <i-input v-model="commitInfoForm.repaymentIntentionDate" type="date" disabled ></i-input>
                    </form-item>
                </i-col>
           	</row>
           	
           	<row :gutter="16">
		         <i-form ref="baseInfoForm"  :model="baseInfoForm"  label-position="right" :label-width="100">
		         	<div class="table">
			            <div class="tr">
			                <div class="td"> <div class="td-box">业务编号</div><div class="td-box" v-for="item in mortgageInfoList">{{ item.houseAddress }} </div> </div>
			            </div>
			            <div class="tr">
			                <div class="td"> <div class="td-box">权属人</div><div class="td-box" v-for="item in mortgageInfoList">{{ item.houseName }} </div> </div>
			                <div class="td"> <div class="td-box">我方抵押顺位</div><div class="td-box" v-for="item in mortgageInfoList">{{ item.ourMortgage }} </div> </div>
			                <div class="td"> <div class="td-box">债权人</div><div class="td-box" v-for="item in mortgageInfoList">{{ item.lender }} </div> </div>
			            </div>
			        </div>
	             </i-form>
	        </row>
           	<row :gutter="16">
           		<i-col v-if="applyInfoFormEditFlage" span="22">
                    <form-item label="其他财务情况：" prop="firstPecuniaryCondition" >
                        <i-input v-model="commitInfoForm.firstPecuniaryCondition" type="textarea" :rows="4" placeholder="请写明房产具体地址、房产证号、车牌号码，以及是否有抵押给他人的情况（必填，限500字）"></i-input>
                    </form-item>
                </i-col>
                <i-col v-else span="22">
                    <form-item label="其他财务情况：" prop="firstPecuniaryCondition" disabled >
                        <i-input v-model="commitInfoForm.firstPecuniaryCondition" type="textarea" :rows="4" placeholder="请写明房产具体地址、房产证号、车牌号码，以及是否有抵押给他人的情况（必填，限500字）" disabled></i-input>
                    </form-item>
                </i-col>
            </row>
            
            <row>
            	<i-col v-if="applyInfoFormEditFlage" span="22">
                    <form-item label="借款人相关人员描述：" prop="firstRelatedPersonnel" >
                        <i-input v-model="commitInfoForm.firstRelatedPersonnel" type="textarea" :rows="4" placeholder="客户经营场所、抵押物所在地现场调查结果说明（必填，限500字）"></i-input>
                    </form-item>
                </i-col>
                <i-col v-else span="22">
                    <form-item label="借款人相关人员描述：" prop="firstRelatedPersonnel" disabled >
                        <i-input v-model="commitInfoForm.firstRelatedPersonnel" type="textarea" :rows="4" placeholder="客户经营场所、抵押物所在地现场调查结果说明（必填，限500字）" disabled></i-input>
                    </form-item>
                </i-col>
            </row>
		</Card>
		
		<Card>
			<p>
				六、分公司/区域贷后跟进结果
			</p>
			<row :gutter="16">
				<i-col span="10">
                    <form-item v-if="applyInfoFormEditFlage" label="移交人："   prop="operator">
                        <i-input v-model="commitInfoForm.operator" ></i-input>
                    </form-item>
                    <form-item v-else label="移交人："  disabled>
                        <i-input v-model="commitInfoForm.operator" disabled ></i-input>
                    </form-item>
                </i-col>
                
				<i-col span="10">
                    <form-item v-if="applyInfoFormEditFlage" label="移交时间："   prop="operateDate">
                        <i-input v-model="commitInfoForm.operateDate" type="date"></i-input>
                    </form-item>
                    <form-item v-else label="移交时间："  disabled>
                        <i-input v-model="commitInfoForm.operateDate" type="date" disabled ></i-input>
                    </form-item>
                </i-col>
			</row>
			
			<row>
				<i-col v-if="applyInfoFormEditFlage" span="22">
                    <form-item label="其他财务情况：" prop="secondPecuniaryCondition" >
                        <i-input v-model="commitInfoForm.secondPecuniaryCondition" type="textarea" :rows="4" placeholder="请写明房产具体地址、房产证号、车牌号码，以及是否有抵押给他人的情况（必填，长度500汉字）"></i-input>
                    </form-item>
                </i-col>
                <i-col v-else span="22">
                    <form-item label="其他财务情况：" prop="secondPecuniaryCondition" disabled >
                        <i-input v-model="commitInfoForm.secondPecuniaryCondition" type="textarea" :rows="4" placeholder="请写明房产具体地址、房产证号、车牌号码，以及是否有抵押给他人的情况（必填，长度500汉字）" disabled></i-input>
                    </form-item>
                </i-col>
            </row>
				
			<row>
				<i-col v-if="applyInfoFormEditFlage" span="22">
                    <form-item label="资产管理部经办人催收调查结果：" prop="secondRelatedPersonnel" >
                        <i-input v-model="commitInfoForm.secondRelatedPersonnel" type="textarea" :rows="4" placeholder="客户经营场所、抵押物所在地现场调查结果说明（必填，长度500汉字）"></i-input>
                    </form-item>
                </i-col>
                <i-col v-else span="22">
                    <form-item label="资产管理部经办人催收调查结果：" prop="secondRelatedPersonnel" disabled >
                        <i-input v-model="commitInfoForm.secondRelatedPersonnel" type="textarea" :rows="4" placeholder="客户经营场所、抵押物所在地现场调查结果说明（必填，长度500汉字）" disabled></i-input>
                    </form-item>
                </i-col>
           	</row>
		</Card>
		
		<Card v-if="approvalInfoFormShowFlage">
            <p slot="title">
              	 七、审批
            </p>
            <!--审批信息表单内容-->
            <row :gutter="16">
                <i-form ref="approvalInfoForm"  :model="approvalInfoForm"   :rules = "approvalInfoFormValidate"  label-position="right" :label-width="100">

                    <row :gutter="16" v-for="(approvalInfo) in approvalInfoList"   :value="approvalInfo.processLogId" :key="approvalInfo.processLogId">
                        <i-col span="4" >
                            <font size="3px" color="#464c5b">{{approvalInfo.stepName}}</font>
                        </i-col>
                        <i-col span="20">
                            <row :gutter="16">
                                <i-col span="20" >
                                    <form-item label="是否同意审批："   >
                                        <radio-group v-model="approvalInfo.isPassFlage" disabled>
                                            <radio label="是" disabled></radio>
                                            <radio label="否" disabled></radio>
                                        </radio-group>
                                    </form-item>
                                </i-col>
                            </row>
                            <row :gutter="16">
                                <i-col span="22">
                                    <i-input v-model="approvalInfo.remark" type="textarea" :autosize="{minRows: 3,maxRows: 5}" disabled  placeholder="请填写审批记录"></i-input>
                                </i-col>
                            </row>
                            <row >
                                <i-col span="8"  offset="16">
                                    <form-item label="审批人：" >{{ approvalInfo.approveUserName }} </form-item>
                                </i-col>
                                <i-col span="8"  offset="16">
                                    <form-item label="审批日期：" >{{ approvalInfo.createTime }} </form-item>
                                </i-col>
                            </row>
                        </i-col>
                    </row>
                    <!--当前审批人操作信息  开始-->
                    <row  v-if = "applyOprShowFlage"  :gutter="16"  >
                        <i-col span="4" >
                            <font size="3px" color="#464c5b">{{approvalInfoForm.approvalUserInfo}}</font>
                        </i-col>
                        <i-col span="20">
                            <row :gutter="16">
                                <i-col span="6" >
                                    <form-item label="是否同意审批："  prop="isPassFlage">
                                        <radio-group v-model="approvalInfoForm.isPassFlage" @click="isPassClick()" >
                                            <span @click="isPassClick(true)"> <radio label="是" ></radio> </span>
                                            <span @click="isPassClick(false)"> <radio label="否" ></radio> </span>
                                            <!--<radio label="是" ></radio>-->
                                            <!--<radio label="否" ></radio>-->
                                        </radio-group>
                                    </form-item>
                                </i-col>
                                <i-col v-if="rockBackShowFlage" span="6" >
                                    <form-item label="是否回退："  prop="isDirectBack">
                                        <radio-group v-model="approvalInfoForm.isDirectBackFlage" >
                                            <span @click="isRockBackClick(true)"> <radio label="是" ></radio> </span>
                                            <span @click="isRockBackClick(false)"> <radio label="否" ></radio> </span>
                                        </radio-group>
                                    </form-item>
                                </i-col>
                               <i-col v-if="rockBackStepShowFlage" span="10" >
                                   <form-item label="回退步骤：" prop="areaId">
                                       <i-select v-model="approvalInfoForm.nextStep" clearable  filterable >
                                           <i-option v-for="item in rockBackStepList" :value="item.step" :key="item.stepName">{{ item.stepName }}</i-option>
                                       </i-select>
                                   </form-item>
                                </i-col>
                            </row>
                            <row :gutter="16">
                                <i-col span="22">
                                    <i-input v-model="approvalInfoForm.remark" type="textarea" :autosize="{minRows: 3,maxRows: 5}"   placeholder="请填写审批记录"></i-input>
                                </i-col>
                            </row>
                            <row >
                                <i-col span="8"  offset="16">
                                    <form-item label="审批人：" >{{ approvalInfoForm.approveUserName }} </form-item>
                                </i-col>
                                <i-col span="8"  offset="16">
                                    <form-item label="审批日期：" >{{ approvalInfoForm.approveDate }} </form-item>
                                </i-col>
                            </row>
                        </i-col>
                    </row>
                    <!--当前审批人操作信息  结束-->

                    <!--抄送信息  开始-->
                    <row  v-if = "applyOprShowFlage"  :gutter="16" >
                        <i-col span="4" >
                            <font size="3px" color="#464c5b">添加抄送</font>
                        </i-col>
                        <i-col span="20">
                            <row :gutter="16">
                                <form-item label="选择抄送人员：" >
                                    <i-select v-model="approvalInfoForm.sendUserIds"  multiple >
                                        <i-option v-for="item in canSendUserList" :value="item.userId" :key="item.userName">{{ item.userName }}</i-option>
                                    </i-select>
                                </form-item>
                            </row>
                            <row :gutter="16">
                                <i-col span="22">
                                    <i-input v-model="approvalInfoForm.copySendInfo" type="textarea" :autosize="{minRows: 3,maxRows: 5}"   placeholder="请填写抄送备注"></i-input>
                                </i-col>
                            </row>

                        </i-col>
                    </row>
                    <!--抄送信息  结束-->

                </i-form>
            </row>
        </Card>
		
		</i-form>
		
		<row style="padding: 10px">
	        <i-col span="24">
	            <i-button v-if = "buttonShowFlage"  type="success"  @click="saveAppply()" >提交审批</i-button>
	            <i-button v-if ="saveDraftShowFlage" type="info"  @click="saveDeraf()" >保存草稿</i-button>
	            <i-button v-if = "buttonShowFlage"  type="success"  @click="resetEdit()"  >撤销</i-button>
	        </i-col>
	    </row>
	</row>
</div>
<script src="/src/js/Litigation/houseLoan.js" ></script>
</body>
</html>