<!DOCTYPE html>
<html lang="zh-cn">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <title>Insert title here</title>
    <link rel="stylesheet" type="text/css" href="/src/css/themes/default.css" />
    <link rel="stylesheet" type="text/css" href="/plugins/iview/2.13.1/css/iview.css" />
    <title>财务确认还款</title>
    <style>
        td {
            width: 180em;
            text-align: right;
        }

        .ivu-input-wrapper input {
            text-align: right;
        }

        .plan,.fact td {
            font-weight: 700;
            font-style: normal;
            font-size: 14px;
            color: #000000;
        }
    </style>
</head>

<body>
    <div id="app" v-cloak>

            <Card title="还款基本信息">
                    <row>
                        <i-col span="6">
                            <div style="width: 49%;display:inline-block;text-align: right">
                                业务编号：
                            </div>
                            <div style="width: 49%;display:inline-block;text-align: left">
                                {{info.businessId}}
                            </div>
                        </i-col>
                        <i-col span="6">
                            <div style="width: 49%;display:inline-block;text-align: right">
                                期数：
                            </div>
                            <div style="width: 49%;display:inline-block;text-align: left">
                                {{info.afterId}}
                            </div>
                        </i-col>
                        <i-col span="6">
                            <div style="width: 49%;display:inline-block;text-align: right">
                                业务类型：
                            </div>
                            <div style="width: 49%;display:inline-block;text-align: left">
                                {{info.businessType}}
                            </div>
                        </i-col>
                        <i-col span="6">
                            <div style="width: 49%;display:inline-block;text-align: right">
                                业务部门：
                            </div>
                            <div style="width: 49%;display:inline-block;text-align: left">
                                {{info.companyName}}
                            </div>
                        </i-col>
                    </row>
                    <row>
                        <i-col span="6">
                            <div style="width: 49%;display:inline-block;text-align: right">
                                业务主办：
                            </div>
                            <div style="width: 49%;display:inline-block;text-align: left">
                                {{info.operatorName}}
                            </div>
                        </i-col>
                        <i-col span="6">
                            <div style="width: 49%;display:inline-block;text-align: right">
                                客户名：
                            </div>
                            <div style="width: 49%;display:inline-block;text-align: left">
                                {{info.customerName}}
                            </div>
                        </i-col>
                        <i-col span="6">
                            <div style="width: 49%;display:inline-block;text-align: right">
                                还款方式：
                            </div>
                            <div style="width: 49%;display:inline-block;text-align: left">
                                {{info.repaymentType}}
                            </div>
                        </i-col>
                        <i-col span="6">
                            <div style="width: 49%;display:inline-block;text-align: right">
                                还款日期：
                            </div>
                            <div style="width: 49%;display:inline-block;text-align: left">
                                {{info.repayDate}}
                            </div>
                        </i-col>
                    </row>
                    <row>
                        <i-col span="6">
                            <div style="width: 49%;display:inline-block;text-align: right">
                                应还金额：
                            </div>
                            <div style="width: 49%;display:inline-block;text-align: left">
                                {{info.repayAmount}}元
                            </div>
                        </i-col>
                        <i-col span="6">
                            <div style="width: 49%;display:inline-block;text-align: right">
                                借款金额：
                            </div>
                            <div style="width: 49%;display:inline-block;text-align: left">
                                {{info.borrowAmount}}元
                            </div>
                        </i-col>
                        <i-col span="6">
                            <div style="width: 49%;display:inline-block;text-align: right">
                                借款期限：
                            </div>
                            <div style="width: 49%;display:inline-block;text-align: left">
                                {{info.borrowLimit}}个月
                            </div>
                        </i-col>
                        <i-col span="6">
                            <div style="width: 49%;display:inline-block;text-align: right">
                                线上出款费率：
                            </div>
                            <div style="width: 49%;display:inline-block;text-align: left">
                                {{info.borrowRate}}%
                            </div>
                        </i-col>
                    </row>
                </Card>

        <!-- <iframe :src="repayInfo.url" style="width: 100%;height: 200px;" frameborder="0" scrolling="no" seamless="seamless">你浏览器太旧啦!</iframe> -->
        <card title="登记还款信息列表">
            <i-table stripe :columns="table.repayRegList.col" :data="table.repayRegList.data"></i-table>
        </card>
        <Modal v-model="repayRegList.rejectModal" title="拒绝原因:">
            <i-input v-model="repayRegList.remark" type="textarea"></i-input>
            <div slot="footer">
                <i-button @click="app.repayRegList.remark='';app.repayRegList.rejectModal=false;">取消</i-button>
                <i-button @click="reject">确认</i-button>
            </div>
        </Modal>
        <!-- <iframe :src="repayRegList.url" :style="repayRegList.style" frameborder="0" scrolling="no" seamless="seamless">你浏览器太旧啦!</iframe> -->
        <card title="本期已匹配款项池银行流水">
            <i-table stripe :columns="table.confirmedRepayment.col" :data="table.confirmedRepayment.data"></i-table>
        </card>
        <!-- <iframe :src="confirmedRepayment.url" :style="confirmedRepayment.style" frameborder="0" scrolling="no" seamless="seamless">你浏览器太旧啦!</iframe> -->
        <!-- <iframe :src="matchedBankStatement.url" :style="matchedBankStatement.style" frameborder="0" scrolling="no" seamless="seamless">你浏览器太旧啦!</iframe> -->
        <card>
            <div slot='title'>
                <span style="font-size: 14px;color: #1c2438;font-weight: 700;">本次匹配款项池银行流水</span>
                <span style="float: right;">
                    <i-button size="small" @click="openMatchBankStatementModal">匹配流水</i-button>
                    <i-button size="small" @click="openAddBankStatementModal">新增</i-button>
                </span>
            </div>
            <i-table stripe :columns="table.matchedBankStatement.col" :data="table.matchedBankStatement.data"></i-table>
        </card>
        <card title="本期还款信息">
            <i-table stripe :columns="table.currPeriodRepayment.col" :data="table.currPeriodRepayment.data"></i-table>
        </card>

        <row>
            <i-col span="12">
                <card title="本次应还信息">
                    <p style="font-size: 14px;color: #1c2438;font-weight: 700;">
                        应还日期：{{thisTimeRepaymentInfo.repayDate}}
                    </p>
                    <p style="font-size: 14px;color: #1c2438;font-weight: 700;">
                        本次应还金额
                    </p>
                    <table class="plan">
                        <tr>
                            <td style="border-top-width: 6px;border-top-style: solid;">本金</td>
                            <td style="border-top-width: 6px;border-top-style: solid;">
                                <!-- <i-input disabled v-model="factRepayPreview.item10"></i-input> -->
                                {{thisTimeRepaymentInfo.item10}}
                            </td>
                            <td style="border-top-width: 6px;border-top-style: solid;">利息</td>
                            <td style="border-top-width: 6px;border-top-style: solid;">
                                <!-- <i-input disabled v-model="factRepayPreview.item20"></i-input> -->
                                {{thisTimeRepaymentInfo.item20}}
                            </td>
                        </tr>
                        <tr>
                            <td >月收分公司服务费</td>
                            <td>
                                <!-- <i-input disabled v-model="factRepayPreview.item30"></i-input> -->
                                {{thisTimeRepaymentInfo.item30}}
                            </td>
                            <td >月收平台费</td>
                            <td>
                                <!-- <i-input disabled v-model="factRepayPreview.item50"></i-input> -->
                                {{thisTimeRepaymentInfo.item50}}
                            </td>
                        </tr>
                        <tr>
                            <td >小计</td>
                            <td>{{thisTimeRepaymentInfo.subtotal}}
                                <!-- <i-input disabled v-model="factRepayPreview.subTotal"></i-input> -->
                            </td>
                            <td >逾期天数</td>
                            <td>
                                {{thisTimeRepaymentInfo.overDays}}
                            </td>
                        </tr>
                        <tr>
                            <td >线下滞纳金</td>
                            <td>{{thisTimeRepaymentInfo.offlineOverDue}}
                                <!-- <i-input disabled v-model="factRepayPreview.offlineOverDue"></i-input> -->
                            </td>
                            <td >线上滞纳金</td>
                            <td>{{thisTimeRepaymentInfo.onlineOverDue}}
                                <!-- <i-input disabled v-model="factRepayPreview.onlineOverDue"></i-input> -->
                            </td>
                        </tr>
                        <tr>
                            <td style="color:red;">■减免金额</td>
                            <td>{{thisTimeRepaymentInfo.derate}}
                                <!-- <i-input disabled v-model="factRepayPreview.surplus"></i-input> -->
                            </td>
                        </tr>
                        <tr>
                            <td >合计(含滞纳金)</td>
                            <td>{{thisTimeRepaymentInfo.total}}
                                <!-- <i-input disabled :value="factRepayPreview.total+factRepayPreview.surplus"></i-input> -->
                            </td>
                        </tr>
                    </table>
                    <br>
                    <p style="font-size: 14px;color: #1c2438;font-weight: 700;">
                            减免明细
                        </p>
                    <table>
                        <tr>
                            <td style="border-top-width: 6px;border-top-style: solid;"></td>
                            <td style="border-top-width: 6px;border-top-style: solid;"></td>
                            <td style="border-top-width: 6px;border-top-style: solid;"></td>
                            <td style="border-top-width: 6px;border-top-style: solid;"></td>
                        </tr>
                        <tr v-if="thisTimeRepaymentInfo.derateDetails&&thisTimeRepaymentInfo.derateDetails.length>0" v-for="item in thisTimeRepaymentInfo.derateDetails">
                            <td>{{item.name}}</td>
                            <td>{{item.amount}}</td>
                        </tr>
                        <tr v-else>
                            <td >无</td>
                        </tr>
                    </table>
                </card>
            </i-col>
            <i-col span="12">
                <card title="实还信息">
                    <table class="fact">
                        <tr>
                            <td>还款金额来源</td>
                            <td>实还日期:</td>
                            <td>
                                <i-input disabled v-model="factRepaymentInfo.repayDate"></i-input>
                            </td>
                            <td></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td>
                                <Checkbox v-model="factRepaymentInfo.useSurplusflag"></Checkbox>
                                结余暂收:
                            </td>
                            <td>
                                <i-input number=true v-model="factRepaymentInfo.surplusFund" :disabled="!factRepaymentInfo.useSurplusflag" @on-enter="surplusFundEnter($event)" @on-blur="surplusFundEnter($event)" style="text-align: right"></i-input>
                            </td>
                            <td style="width: 200px">
                                <span>结余暂收可用金额{{factRepaymentInfo.canUseSurplus}}元</span>
                            </td>
                        </tr>
                        <tr>
                            <td></td>
                            <td>流水合计：</td>
                            <td>
                                <i-input disabled v-model="factRepaymentInfo.moneyPoolAccount" style="text-align: right"></i-input>
                            </td>
                            <td style="width: 200px">
                            </td>
                        </tr>
                        <tr>
                            <td></td>
                            <td>还款合计：</td>
                            <td>
                                <i-input disabled v-model="factRepaymentInfo.repayAccount" class="rigthText"></i-input>
                            </td>
                            <td style="width: 200px">
                            </td>
                        </tr>
                    </table>


                    <p style="font-size: 14px;color: #1c2438;font-weight: 700;">
                        实还明细
                    </p>
                    <table class="fact">
                        <tr>
                            <td style="border-top-width: 6px;border-top-style: solid;">本金</td>
                            <td style="border-top-width: 6px;border-top-style: solid;">
                                <i-input disabled v-model="factRepayPreview.item10"></i-input>
                            </td>
                            <td style="border-top-width: 6px;border-top-style: solid;">利息</td>
                            <td style="border-top-width: 6px;border-top-style: solid;">
                                <i-input disabled v-model="factRepayPreview.item20"></i-input>
                            </td>
                        </tr>
                        <tr>
                            <td>月收分公司服务费</td>
                            <td>
                                <i-input disabled v-model="factRepayPreview.item30"></i-input>
                            </td>
                            <td>月收平台费</td>
                            <td>
                                <i-input disabled v-model="factRepayPreview.item50"></i-input>
                            </td>
                        </tr>
                        <tr>
                            <td>小计</td>
                            <td>{{factRepayPreview.subTotal}}
                                <!-- <i-input disabled v-model="factRepayPreview.subTotal"></i-input> -->
                            </td>
                            <td></td>
                            <td>
                            </td>
                        </tr>
                        <tr>
                            <td>线下滞纳金</td>
                            <td>
                                <i-input  disabled :disabled="thisTimeRepaymentInfo.offlineOverDue==0" v-model="factRepayPreview.offlineOverDue"  ></i-input>
                            </td>
                            <td>线上滞纳金</td>
                            <td>
                                <i-input  disabled :disabled="thisTimeRepaymentInfo.onlineOverDue==0" v-model="factRepayPreview.onlineOverDue"></i-input>
                            </td>
                        </tr>
                        <tr>
                            <td>结余</td>
                            <td>{{factRepayPreview.surplus}}
                                <!-- <i-input disabled v-model="factRepayPreview.surplus"></i-input> -->
                            </td>
                        </tr>
                        <tr>
                            <td>合计</td>
                            <td>{{factRepayPreview.total}}
                                <!-- <i-input disabled :value="factRepayPreview.total+factRepayPreview.surplus"></i-input> -->
                            </td>
                        </tr>
                        <tr>
                            <td>备注</td>
                            <td colspan="3">
                                <i-input type="textarea" v-model="factRepaymentInfo.remark"></i-input>
                            </td>
                        </tr>
                    </table>
                </card>
            </i-col>
        </row>
        <card title="本次标的还款明细">
            <i-table :columns="table.projRepayment.col" :data="table.projRepayment.data"></i-table>
        </card>
        <row>
            <i-col span="22">&nbsp;</i-col>
            <i-col span="2">
                <i-button @click="confirmRepayment()" :loading="submitloading">提交</i-button>
                <i-button @click="closePage()">关闭</i-button>
            </i-col>
        </row>
        <Modal v-model="manualAddBankSatements.show" :closable=false>
            <iframe :src="manualAddBankSatements.url" style="width: 100%;height: 650px;" frameborder="0" scrolling="no" seamless="seamless">你浏览器太旧啦!</iframe>
            <div slot="footer" style="min-height: 0px"></div>
        </Modal>
        <Modal v-model="manualMatchBankSatements.show" :closable=false :width="80">
            <iframe :src="manualMatchBankSatements.url" style="width: 100%;height: 700px;" frameborder="0" scrolling="no" seamless="seamless">你浏览器太旧啦!</iframe>
            <div slot="footer" style="min-height: 0px"></div>
        </Modal>
    </div>


    <!-- 引入vue -->
    <script type="text/javascript" src="/plugins/vue/vue.min.js"></script>
    <!-- iview js -->
    <script type="text/javascript" src="/plugins/iview/2.13.1/js/iview.min.js"></script>
    <script type="text/javascript" src="/plugins/layui/layui.js"></script>
    <script type="text/javascript" src="/plugins/axios/axios.min.js"></script>
    <script type="text/javascript" src="/src/js/comm.js"></script>
    <script type="text/javascript" src="/properties/config.js"></script>
    <script type="text/javascript" src="/build/js/appToken.js"></script>
    <script type="text/javascript" src="/src/js/finance/projRepayment.js"></script>
    <script type="text/javascript" src="/src/js/finance/repayConfirm.js"></script>
</body>

</html>